RSpec.describe 'Expenditure integrations', type: :feature do
  it 'renders all expenditures' do
    user = FactoryBot.create(:user)
    group = FactoryBot.create(:group, user_id: user.id)
    FactoryBot.create(:expenditure, user_id: user.id)
    user.save
    login_as(user, scope: :user)
    visit "/users/#{user.id}/groups/#{group.id}"
    expect(page).to have_content('sneakers')
  end
  it 'redirects to new expenditure page' do
    user = FactoryBot.create(:user)
    group = FactoryBot.create(:group, user_id: user.id)
    user.save
    login_as(user, scope: :user)
    visit "/users/#{user.id}/groups/#{group.id}"
    click_link 'New Expenditure'
    expect(current_path).to eq("/users/#{user.id}/expenditures/new")
  end
end
